==========================
Simple flow chart
==========================

flowchart LR
  subgraph TOP
    direction TB
    subgraph B1
        direction RL
        i1 -->f1
    end
    subgraph B2
        direction BT
        i2 -->f2
    end
  end
  A --> TOP --> B
  B1 --> B2

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_subgraph
      (flow_vertex_text)
      (flow_stmt_subgraph_inner
        (flow_stmt_direction
          (flowchart_direction_tb))
        (flow_stmt_subgraph
          (flow_vertex_text)
          (flow_stmt_subgraph_inner
            (flow_stmt_direction
              (flowchart_direction_rl))
            (flow_stmt_vertice
              (flow_node
                (flow_vertex
                  (flow_vertex_id)))
              (flow_link_simplelink
                (flow_link_arrow))
              (flow_node
                (flow_vertex
                  (flow_vertex_id))))))
        (flow_stmt_subgraph
          (flow_vertex_text)
          (flow_stmt_subgraph_inner
            (flow_stmt_direction
              (flowchart_direction_bt))
            (flow_stmt_vertice
              (flow_node
                (flow_vertex
                  (flow_vertex_id)))
              (flow_link_simplelink
                (flow_link_arrow))
              (flow_node
                (flow_vertex
                  (flow_vertex_id))))))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Nodes
==========================

flowchart LR
    id
    id1[This is the text in the box]
    id1(This is the text in the box)
    id1([This is the text in the box])
    id1[[This is the text in the box]]
    id1[(Database)]
    id1((This is the text in the circle))
    id1>This is the text in the box]
    id1{This is the text in the box}
    id1{{This is the text in the box}}
    id1[/This is the text in the box/]
    id1[\This is the text in the box\]
    A[/Christmas\]
    B[\Go shopping/]

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_round
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_stadium
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_subroutine
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_cylinder
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_circle
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_odd
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_diamond
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_hexagon
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_leanright
            (flow_text_literal)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_leanleft
            (flow_text_literal)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_trapezoid
            (flow_text_literal)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_inv_trapezoid
            (flow_text_literal)))))))


==========================
Links
==========================

flowchart LR
    A-->B
    A --- B
    A-- This is the text! ---B
    A---|This is the text|B
    A-->|text|B
    A-- text -->B
    A-.->B
    A-. text .-> B
    A ==> B
    A == text ==> B
    A -- text --> B -- text2 --> C

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_arrowtext
        (flow_link_arrow)
        (flow_arrow_text
          (flow_text_literal)))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_arrowtext
        (flow_link_arrow)
        (flow_arrow_text
          (flow_text_literal)))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))


==========================
Arrow types
==========================

flowchart LR
    A --o B
    B --x C
    A o--o B
    B <--> C
    C x--x D

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Link length
==========================

flowchart TD
    A[Start] --> B{Is it?}
    B -->|Yes| C[OK]
    C --> D[Rethink]
    D --> B
    B ---->|No| E[End]
    B -- Yes --> C[OK]
    B -- No ----> E[End]

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash))))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_diamond
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_arrowtext
        (flow_link_arrow)
        (flow_arrow_text
          (flow_text_literal)))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_arrowtext
        (flow_link_arrow)
        (flow_arrow_text
          (flow_text_literal)))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))))

==========================
Multi-nodes
==========================

flowchart LR
    a --> b & c--> d
    A & B--> C & D

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id))
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))
        (flow_vertex
          (flow_vertex_id))))))

==========================
Double-quote escape
==========================

flowchart LR
    id1["This is the (text) in the box"]
    A["A double quote:#quot;"] -->B["A dec char:#9829;"]

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_quoted)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_quoted))))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_quoted)))))))

==========================
Subgraph
==========================

flowchart LR
  subgraph TOP
    direction TB
    subgraph B1
        direction RL
        i1 -->f1
    end
    subgraph B2
        direction BT
        i2 -->f2
    end
  end
  A --> TOP --> B
  B1 --> B2

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_subgraph
      (flow_vertex_text)
      (flow_stmt_subgraph_inner
        (flow_stmt_direction
          (flowchart_direction_tb))
        (flow_stmt_subgraph
          (flow_vertex_text)
          (flow_stmt_subgraph_inner
            (flow_stmt_direction
              (flowchart_direction_rl))
            (flow_stmt_vertice
              (flow_node
                (flow_vertex
                  (flow_vertex_id)))
              (flow_link_simplelink
                (flow_link_arrow))
              (flow_node
                (flow_vertex
                  (flow_vertex_id))))))
        (flow_stmt_subgraph
          (flow_vertex_text)
          (flow_stmt_subgraph_inner
            (flow_stmt_direction
              (flowchart_direction_bt))
            (flow_stmt_vertice
              (flow_node
                (flow_vertex
                  (flow_vertex_id)))
              (flow_link_simplelink
                (flow_link_arrow))
              (flow_node
                (flow_vertex
                  (flow_vertex_id))))))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))
==========================
Node with hyphen in name (Issue #13)
==========================

flowchart TD
    First-Task -- Error --> SomeTask

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Multiline string in node (Issue #13)
==========================

flowchart TD
    SomeTask["Multiline 
        String with Task Name"] -- Success --> Node

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_quoted))))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Complete Issue #13 example
==========================

flowchart TD
    First-Task -- Error --> SomeTask
    SomeTask["Multiline 
        String with Task Name"] -- Success --> Node

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_quoted))))
      (flow_link_middletext
        (flow_link_arrow_start)
        (flow_arrow_text)
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
graph TD alias
==========================

graph TD
    A[Start] --> B[End]

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash))))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))))

==========================
graph LR alias
==========================

graph LR
    A --> B

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Invisible link (basic)
==========================

flowchart TD
    A[Start] ~~~ B[End]

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash))))
      (flow_link_invisible_link
        (flow_link_invisible))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))))

==========================
Invisible link (longer, affects layout weight)
==========================

flowchart LR
    A ~~~~~ B

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_invisible_link
        (flow_link_invisible))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Mixed visible and invisible links
==========================

flowchart TD
    A --> B
    A ~~~ C
    B --> C

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_invisible_link
        (flow_link_invisible))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Icon syntax in node label (fa:fa-*)
==========================

flowchart LR
    F[fa:fa-car Car]

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_icon)))))))

==========================
Unclosed double-quote in node label produces error
==========================

flowchart LR
  C[Unclosed] --> D["jkl]

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash))))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (ERROR
      (UNEXPECTED 'j'))))

==========================
Subgraph with id[label] form
==========================

flowchart TD
    subgraph SubGraph[Label]
    end

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_subgraph
      (flow_vertex_text)
      (flow_vertex_text))))

==========================
direction as node ID
==========================

flowchart TD
    direction[Label] --> B[Label 2]

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id
            (_flow_vertex_id_token))
          (flow_vertex_square
            (flow_text_literal_slash))))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))))

==========================
Node annotation @{} - single pair bare value
=============================================

flowchart TD
    A@{ shape: circle }

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_annotation
            (flow_annotation_pair
              (flow_annotation_key)
              (flow_annotation_value_bare))))))))

==========================
Node annotation @{} - quoted value
===================================

flowchart TD
    A@{ label: "My Node" }

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_annotation
            (flow_annotation_pair
              (flow_annotation_key)
              (flow_annotation_value_quoted))))))))

==========================
Node annotation @{} - multi-pair with comma
============================================

flowchart TD
    A@{ shape: circle, label: "X" }

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_annotation
            (flow_annotation_pair
              (flow_annotation_key)
              (flow_annotation_value_bare))
            (flow_annotation_pair
              (flow_annotation_key)
              (flow_annotation_value_quoted))))))))

==========================
Node annotation @{} - multi-line
==================================

flowchart TD
    A@{
      shape: circle
    }

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_annotation
            (flow_annotation_pair
              (flow_annotation_key)
              (flow_annotation_value_bare))))))))

==========================
Hyphenated text in node label (BUG-4)
==========================

flowchart TD
    A[foo-bar] --> B
    C[multi-word-label]

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash))))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))))

==========================
Blank line inside subgraph body (BUG-5)
==========================

flowchart TD
    subgraph SubG

        A --> B

    end

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_subgraph
      (flow_vertex_text)
      (flow_stmt_subgraph_inner
        (flow_stmt_vertice
          (flow_node
            (flow_vertex
              (flow_vertex_id)))
          (flow_link_simplelink
            (flow_link_arrow))
          (flow_node
            (flow_vertex
              (flow_vertex_id))))))))

==========================
Empty @{} body is valid syntax (semantic error, not parse error)
==========================

flowchart TD
    A@{}

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_annotation))))))

==========================
Triple-paren double-circle shape (issue #9)
==========================

flowchart TD
    id1(((This is the text in the circle)))

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_double_circle
            (flow_text_literal_slash)))))))

==========================
Edge-ID annotation prefix on arrow (issue #8)
==========================

flowchart LR
  A e1@--> B
  A e2@==> C

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
style / classDef / class directives and :::class application (issue #7)
==========================

flowchart LR
    A:::foo --> B
    classDef foo fill:#f96
    style A stroke:#333
    class B foo

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_class_ref)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_classdef
      (classdef_name)
      (css_property_list
        (css_pair
          (css_property_name)
          (css_value))))
    (flow_stmt_style
      (flow_vertex_id)
      (css_property_list
        (css_pair
          (css_property_name)
          (css_value))))
    (flow_stmt_class
      (flow_vertex_id)
      (classdef_name))))

==========================
classDef with multiple CSS properties (issue #57)
==========================

flowchart LR
    classDef highlight fill:#f9f,stroke:#333,stroke-width:2px

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_classdef
      (classdef_name)
      (css_property_list
        (css_pair
          (css_property_name)
          (css_value))
        (css_pair
          (css_property_name)
          (css_value))
        (css_pair
          (css_property_name)
          (css_value))))))

==========================
style with multiple CSS properties (issue #57)
==========================

flowchart LR
    A
    style A fill:#bbf,stroke:#f66

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_style
      (flow_vertex_id)
      (css_property_list
        (css_pair
          (css_property_name)
          (css_value))
        (css_pair
          (css_property_name)
          (css_value))))))

==========================
classDef with no CSS body (issue #57)
==========================

flowchart LR
    classDef empty

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_classdef
      (classdef_name))))

==========================
click event handler (issue #9)
==========================

flowchart LR
    A-->B
    click A "https://example.com" "Tooltip"

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_click)))

==========================
Quoted subgraph name (issue #9)
==========================

flowchart LR
subgraph "My Subgraph"
  A --> B
end

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_subgraph
      (flow_text_quoted)
      (flow_stmt_subgraph_inner
        (flow_stmt_vertice
          (flow_node
            (flow_vertex
              (flow_vertex_id)))
          (flow_link_simplelink
            (flow_link_arrow))
          (flow_node
            (flow_vertex
              (flow_vertex_id))))))))

==========================
Nested subgraphs with direction and blank lines (issue #6)
==========================

flowchart LR
    subgraph subgraph1
        direction TB
        top1[top] --> bottom1[bottom]
    end
    subgraph subgraph2
        direction TB
        top2[top] --> bottom2[bottom]
    end

    outside --> subgraph1

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_subgraph
      (flow_vertex_text)
      (flow_stmt_subgraph_inner
        (flow_stmt_direction
          (flowchart_direction_tb))
        (flow_stmt_vertice
          (flow_node
            (flow_vertex
              (flow_vertex_id)
              (flow_vertex_square
                (flow_text_literal_slash))))
          (flow_link_simplelink
            (flow_link_arrow))
          (flow_node
            (flow_vertex
              (flow_vertex_id)
              (flow_vertex_square
                (flow_text_literal_slash)))))))
    (flow_stmt_subgraph
      (flow_vertex_text)
      (flow_stmt_subgraph_inner
        (flow_stmt_direction
          (flowchart_direction_tb))
        (flow_stmt_vertice
          (flow_node
            (flow_vertex
              (flow_vertex_id)
              (flow_vertex_square
                (flow_text_literal_slash))))
          (flow_link_simplelink
            (flow_link_arrow))
          (flow_node
            (flow_vertex
              (flow_vertex_id)
              (flow_vertex_square
                (flow_text_literal_slash)))))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_simplelink
        (flow_link_arrow))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Dash in pipe-delimited edge label (BUG-6a)
==========================

flowchart TD
    A -->|No - Citizen| B
    C -->|Yes - Admin| D

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_arrowtext
        (flow_link_arrow)
        (flow_arrow_text
          (flow_text_literal)))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_arrowtext
        (flow_link_arrow)
        (flow_arrow_text
          (flow_text_literal)))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Colon in pipe-delimited edge label (BUG-6b)
==========================

flowchart TD
    A -->|Step 1: Init| B
    C -->|Step 2: Done| D

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_arrowtext
        (flow_link_arrow)
        (flow_arrow_text
          (flow_text_literal)))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_arrowtext
        (flow_link_arrow)
        (flow_arrow_text
          (flow_text_literal)))
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
Slash in unquoted square-bracket label (issue #12)
==========================

flowchart TD
    A[label/with/slashes]
    OthersNotified[Admin / Other Owners: Update initiative ownership]

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_square
            (flow_text_literal_slash)))))))

==========================
Slash shapes unaffected by issue #12 fix
==========================

flowchart TD
    id1[/lean right/]
    A[/Christmas\]
    B[\Go shopping/]

---

(source_file
  (diagram_flow
    (flowchart_direction_tb)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_leanright
            (flow_text_literal)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_trapezoid
            (flow_text_literal)))))
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)
          (flow_vertex_inv_trapezoid
            (flow_text_literal)))))))

==========================
invalid arrow `->` captured as flow_link_invalid_arrow
==========================

flowchart LR
    A -> B

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_vertice
      (flow_node
        (flow_vertex
          (flow_vertex_id)))
      (flow_link_invalid_arrow)
      (flow_node
        (flow_vertex
          (flow_vertex_id))))))

==========================
class statement without class name (missing classdef_name)
==========================

flowchart LR
    class A

---

(source_file
  (diagram_flow
    (flowchart_direction_lr)
    (flow_stmt_class
      (flow_vertex_id))))
